<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sound Hire Booking – JTT Events</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">

  <style>
    /* Custom styles for mobile calendar */
    .fc-event-title {
      white-space: normal !important;
      font-size: 0.75rem !important;
      line-height: 1.2 !important;
      padding: 2px 4px !important;
    }
    
    .fc-event-time {
      display: none !important;
    }
    .fc-daygrid-day-events {
      min-height: 40px;
    }
    .fc-event {
      cursor: pointer;
    }
    .fc-event:hover {
      opacity: 0.9;
    }
    #eventModal {
      transition: opacity 0.3s ease;
    }
    
    @media (max-width: 768px) {
      .fc-header-toolbar {
        flex-direction: column !important;
        gap: 0.5rem !important;
      }
      
      .fc-toolbar-title {
        font-size: 1.25rem !important;
      }
      
      .fc-button {
        padding: 0.25rem 0.5rem !important;
        font-size: 0.75rem !important;
      }
      
      .fc-daygrid-event {
        margin-bottom: 2px !important;
      }
    }
  </style>



<header class="bg-slate-700 text-white shadow-md sticky top-0 z-50">
  <div class="container mx-auto px-4 flex justify-between items-center py-4">
    <a href="index.html" class="block max-w-5 md:max-w-5">
      <img src="images/JTT-Logo.png" alt="JTT Events Logo" class="h-auto w-full object-contain" />
    </a>

    
    <button id="menu-button" class="md:hidden focus:outline-none">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>

    
    <nav id="nav-menu" class="hidden md:flex space-y-2 md:space-y-0 md:space-x-4 flex-col md:flex-row absolute md:static top-full left-0 w-full md:w-auto bg-slate-700 md:bg-transparent text-center md:text-left p-4 md:p-0 z-40">
      <a href="index.html" class="block py-2 md:py-0 hover:underline">Home</a>
      <a href="gallery.html" class="block py-2 md:py-0 hover:underline">Gallery</a>
      <a href="services.html" class="block py-2 md:py-0 hover:underline">Services</a>
      <a href="contact.html" class="block py-2 md:py-0 hover:underline">Contact</a>
    </nav>
  </div>
</header>


<section class="text-center py-12 bg-gradient-to-r from-slate-900 to-slate-600 text-white">
  <h2 class="text-4xl font-bold mb-2">Sound Hire Booking</h2>
  <p class="text-lg">Get an instant quote based on your event type and hours</p>
</section>

<div id="eventModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
    <div class="flex justify-between items-start mb-4">
      <h3 class="text-xl font-bold text-gray-900" id="modalEventTitle">Event Details</h3>
      <button id="closeEventModal" class="text-gray-500 hover:text-gray-700">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div class="space-y-2">
      <p><strong>Date:</strong> <span id="modalEventDate"></span></p>
      <p><strong>Time:</strong> <span id="modalEventTime"></span></p>
      <p><strong>Duration:</strong> <span id="modalEventDuration"></span></p>
      <p><strong>Type:</strong> <span id="modalEventType"></span></p>
    </div>
    <div class="mt-6">
      <button id="closeEventModalBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
        Close
      </button>
    </div>
  </div>
</div>

<section class="max-w-5xl mx-auto py-10 px-4">
  <h2 class="text-3xl font-bold text-center text-blue-700 mb-4">Confirmed Bookings Calendar</h2>
  <p class="text-center mb-6 text-gray-600">Please see our confirmed booked dates before making a booking</p>
  <p class="text-center mb-6 text-gray-600">Click on any booking to view details</p>
  <div id="calendar" class="bg-white shadow-md rounded-lg p-2 sm:p-4 overflow-x-auto"></div>
</section>


<section class="max-w-3xl mx-auto bg-white p-8 rounded shadow-lg mb-16">
  <h2 class="text-2xl font-bold mb-6 text-blue-700 text-center">Sound Hire Booking Form</h2>
  <form id="bookingForm" class="space-y-6">
    <input type="hidden" name="_subject" value="New Sound Booking Request from JTT Events">
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="cost_breakdown" id="costBreakdownField">

    <div>
      <label class="block font-semibold mb-1">Name</label>
      <input name="name" type="text" required class="w-full border p-2 rounded" />
    </div>

    <div>
      <label class="block font-semibold mb-1">Phone</label>
      <input name="phone" type="tel" required class="w-full border p-2 rounded" />
    </div>

    <div>
      <label class="block font-semibold mb-1">Event Type</label>
      <select name="eventType" id="eventType" required class="w-full border p-2 rounded">
        <option value="event">Event (Musical,Political,Church and Corporate Events)</option>
        <option value="private">Private Home Hire (Weddings,Parties,Family Gatherings,Unvelings)</option>
      </select>
    </div>

    <div>
      <label class="block font-semibold mb-1">Date</label>
      <input name="date" type="date" id="date" required class="w-full border p-2 rounded" />
    </div>

    <div>
      <label class="block font-semibold mb-1">Start Time</label>
      <input name="startTime" type="time" id="startTime" required class="w-full border p-2 rounded" />
    </div>

    <div>
      <label class="block font-semibold mb-1">Duration (hours)</label>
      <input name="duration" type="number" id="duration" min="1" max="24" required class="w-full border p-2 rounded" />
    </div>

    
    <section id="costBreakdown" class="hidden mt-10 bg-gray-100 p-6 rounded-lg shadow-lg">
      <h3 class="text-2xl font-bold mb-4 text-blue-900">Cost Breakdown</h3>
      <ul id="hourBreakdown" class="list-disc list-inside text-gray-800 space-y-1 mb-4"></ul>
      <p id="subtotal" class="font-semibold text-gray-700 mb-1">Subtotal: R0</p>
      <p id="transportFee" class="font-semibold text-gray-700 mb-4">Transport Fee: R0</p>
      <p id="estimatedCost" class="text-xl font-bold text-blue-800">Total: R0</p>
    </section>

    <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition">
      Submit Booking
    </button>
  </form>
</section>


<div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full mx-4">
    <div class="text-center">
      <svg class="mx-auto h-12 w-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
      <h3 class="text-2xl font-bold text-gray-900 mt-4">Booking Submitted!</h3>
      <p class="text-gray-600 mt-2">Thank you for your booking request. We'll contact you shortly to confirm the details.</p>
      <div class="mt-6">
        <button id="closeModal" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<footer id="contact" class="bg-gray-900 text-white py-8 text-center">
  <p class="text-lg font-semibold mb-2">JTT Events</p>
  <p class="mb-1"><a href="mailto:info@jttevents.co.za" class="hover:underline">jtt.eventsgroup@gmail.com</a></p>
  <p class="mb-1"><a href="tel:+27764710323" class="hover:underline">076 471 0323/061 470 7696</a></p>
  <div class="mb-4 space-x-4">
    <a href="index.html" class="hover:underline">Home</a>
    <a href="gallery.html" class="hover:underline">Gallery</a>
    <a href="#services" class="hover:underline">Services</a>
    <a href="#contact" class="hover:underline">Contact</a>
  </div>
  <p class="text-sm">&copy; <span id="year"></span> JTT Events. All rights reserved.</p>
</footer>

<script>
  // DOM Elements
  const eventType = document.getElementById('eventType');
  const startTime = document.getElementById('startTime');
  const duration = document.getElementById('duration');
  const estimatedCost = document.getElementById('estimatedCost');
  const subtotalEl = document.getElementById('subtotal');
  const hourBreakdown = document.getElementById('hourBreakdown');
  const transportFeeEl = document.getElementById('transportFee');
  const costBreakdown = document.getElementById('costBreakdown');
  const menuButton = document.getElementById("menu-button");
  const navMenu = document.getElementById("nav-menu");
  const bookingForm = document.getElementById('bookingForm');
  const successModal = document.getElementById('successModal');
  const closeModal = document.getElementById('closeModal');
  const eventModal = document.getElementById('eventModal');
  const closeEventModal = document.getElementById('closeEventModal');
  const closeEventModalBtn = document.getElementById('closeEventModalBtn');
  
  // Toggle mobile menu
  menuButton.addEventListener("click", () => {
    navMenu.classList.toggle("hidden");
  });

  // Close success modal
  closeModal.addEventListener("click", () => {
    successModal.classList.add("hidden");
  });

   // Close modal handlers
  closeEventModal.addEventListener('click', () => {
    eventModal.classList.add('hidden');
  });
  
  closeEventModalBtn.addEventListener('click', () => {
    eventModal.classList.add('hidden');
  });

  // Set current year in footer
  document.getElementById('year').textContent = new Date().getFullYear();

  // Calculate cost function
  function calculateCost() {
    const type = eventType.value;
    const time = startTime.value;
    const hours = parseInt(duration.value);

    // Reset display
    estimatedCost.textContent = "Total: R0";
    subtotalEl.textContent = "Subtotal: R0";
    transportFeeEl.textContent = "Transport Fee: R0";
    hourBreakdown.innerHTML = "";
    document.getElementById('costBreakdownField').value = "";

    // Validate inputs
    if (!type || !time || isNaN(hours) || hours < 1) {
      costBreakdown.classList.add('hidden');
      return;
    }

    const startHour = parseInt(time.split(':')[0]);
    let subtotal = 0;
    let breakdownText = "COST BREAKDOWN:\n\n";

    const rates = {
      event: { day: 150, night: 200 },
      private: { day: 100, night: 150 }
    };

    // Calculate rates for each hour
    for (let i = 0; i < hours; i++) {
      const currentHour = (startHour + i) % 24;
      const isDay = currentHour >= 6 && currentHour < 18;
      const rate = isDay ? rates[type].day : rates[type].night;
      subtotal += rate;

      const label = isDay ? "Day Rate" : "Night Rate";
      const timeLabel = `${String(currentHour).padStart(2, '0')}:00 - ${String((currentHour + 1) % 24).padStart(2, '0')}:00`;
      const listItem = `<li>${timeLabel} → ${label} @ R${rate}</li>`;
      hourBreakdown.insertAdjacentHTML('beforeend', listItem);
      
      // Add to breakdown text
      breakdownText += `• ${timeLabel} - ${label}: R${rate}\n`;
    }

    // Calculate transport fee
    const transport = subtotal < 1000 ? 150 : 0;
    const total = subtotal + transport;

    // Update display
    subtotalEl.textContent = `Subtotal: R${subtotal}`;
    transportFeeEl.textContent = `Transport Fee: R${transport}`;
    estimatedCost.textContent = `Total: R${total}`;
    
    // Complete breakdown text
    breakdownText += `\nSubtotal: R${subtotal}\n`;
    breakdownText += `Transport Fee: R${transport}\n`;
    breakdownText += `TOTAL COST: R${total}`;
    
    // Update hidden field with the breakdown
    document.getElementById('costBreakdownField').value = breakdownText;
    
    // Show cost breakdown
    costBreakdown.classList.remove('hidden');
  }

  // Form submission handler
  bookingForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(bookingForm);
    
    try {
      // Submit to Formspree
      const response = await fetch('https://formspree.io/f/meozlvgj', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      });
      
      if (response.ok) {
        // Show success modal
        successModal.classList.remove('hidden');
        // Reset form
        bookingForm.reset();
        // Hide cost breakdown
        costBreakdown.classList.add('hidden');
      } else {
        throw new Error('Form submission failed');
      }
    } catch (error) {
      alert('There was a problem submitting your booking. Please try again or contact us directly.');
      console.error('Form submission error:', error);
    }
  });

  // Event listeners for calculation inputs
  [eventType, startTime, duration].forEach(element => {
    element.addEventListener('input', calculateCost);
  });

// Initialize calendar with event click functionality
  document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      height: 'auto',
      headerToolbar: {
        left: 'prev,next',
        center: 'title',
        right: 'today dayGridMonth,timeGridWeek'
      },
      dayMaxEvents: 3,
      eventClick: function(info) {
        // Extract event details
        const event = info.event;
        const start = event.start;
        const end = event.end || start;
        
        // Calculate duration in hours
        const durationMs = end - start;
        const durationHours = Math.round(durationMs / (1000 * 60 * 60));
        
        // Set modal content
        document.getElementById('modalEventTitle').textContent = event.title;
        document.getElementById('modalEventDate').textContent = start.toLocaleDateString();
        document.getElementById('modalEventTime').textContent = 
          `${start.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})} - ${end.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
        document.getElementById('modalEventDuration').textContent = `${durationHours} hours`;
        document.getElementById('modalEventType').textContent = event.extendedProps.type || 'Event';
        
        // Show modal
        eventModal.classList.remove('hidden');
        
        // Prevent default click behavior
        info.jsEvent.preventDefault();
      },
      events: [
        {
          title: 'Wedding Reception',
          start: '2025-09-28T08:00:00',
          end: '2025-09-28T18:00:00',
          color: '#ec4899',
          type: 'Private Event'
        },
        {
          start: '2025-09-28',
          end: '2025-09-28',
          display: 'background',
          backgroundColor: 'rgb(9, 47, 253)'
        }
        {
          title: 'Mabele School Event',
          start: '2025-08-29T09:00:00',
          end: '2025-08-29T16:00:00',
          color: '#ec4899',
          type: 'Private Event'
        },
        {
          start: '2025-08-29',
          end: '2025-08-29',
          display: 'background',
          backgroundColor: 'rgb(9, 47, 253)'
        }
        {
          title: 'Hi-Lite Event',
          start: '2025-09-07T12:00:00',
          end: '2025-09-07T23:00:00',
          color: '#ec4899',
          type: 'Music Event'
        },
        {
          start: '2025-09-07',
          end: '2025-09-07',
          display: 'background',
          backgroundColor: 'rgb(9, 47, 253)'
        }
      ],
      eventDidMount: function(info) {
        // Add cursor pointer to indicate clickable
        info.el.style.cursor = 'pointer';
      }
      
    });
    calendar.render();

    // Handle window resize
    window.addEventListener('resize', function() {
      calendar.updateSize();
    });

    // Calculate cost if fields are pre-filled
    if (eventType.value && startTime.value && duration.value) {
      calculateCost();
    }
  });
</script>
</body>
</html>